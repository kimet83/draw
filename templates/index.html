<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>ë¬´ì‘ìœ„ ì¶”ì²¨ê¸°</title>
  <script>
    (function () {
      try {
        var dark = localStorage.getItem('draw.dark') === '1';
        document.documentElement.setAttribute('data-bs-theme', dark ? 'dark' : 'light');
      } catch (e) { }
    })();
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body.presentation {
      font-size: 1.25rem;
    }

    body.presentation h1,
    body.presentation .card-title {
      font-size: 2rem;
    }

    body.presentation .card {
      background: transparent;
      border: none;
      box-shadow: none;
    }

    /* âœ… ë°œí‘œëª¨ë“œì¼ ë•Œë§Œ ìˆ¨ê¹€ */
    body.presentation .presentation-hide {
      display: none !important;
    }

    body.presentation table {
      font-size: 1.1rem;
    }

    /* ë‹¤í¬ í…Œë§ˆì¼ ë•Œ #btn-resetì˜ outline-dark íŒ”ë ˆíŠ¸ë¥¼ ë°ê²Œ ì¬ì •ì˜ */
    html[data-bs-theme="dark"] #btn-reset.btn-outline-dark {
      --bs-btn-color: var(--bs-body-color);
      --bs-btn-border-color: var(--bs-body-color);
      --bs-btn-hover-bg: var(--bs-body-color);
      --bs-btn-hover-border-color: var(--bs-body-color);
      --bs-btn-hover-color: var(--bs-body-bg);
      --bs-btn-active-bg: var(--bs-body-color);
      --bs-btn-active-border-color: var(--bs-body-color);
    }
  </style>
</head>

<body class="bg-body">

  <div class="container py-5">
    <h1 class="text-center mb-4">2025ë…„ ì œ 2ì°¨ ì„ìƒë³‘ë¦¬ì‚¬í˜‘íšŒ ì¶©ë‚¨ë„íšŒ ë³´ìˆ˜êµìœ¡ ê²½í’ˆ ì¶”ì²¨</h1>

    <!-- ì—…ë¡œë“œ/í† ê¸€ ë²„íŠ¼ ì˜ì—­ -->
    <div class="d-flex justify-content-end mb-4 gap-2 controls presentation-hide">
      <button class="btn btn-secondary" id="btn-darkmode" type="button">ğŸŒ™ ë‹¤í¬ëª¨ë“œ</button>
      <button class="btn btn-outline-secondary" id="btn-present" type="button">â›¶ ë°œí‘œëª¨ë“œ</button>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal" type="button">
        ì—‘ì…€ ì—…ë¡œë“œ
      </button>
    </div>

    <!-- ì—‘ì…€ ì—…ë¡œë“œ ëª¨ë‹¬ -->
    <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <form action="/upload" method="post" enctype="multipart/form-data" class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="uploadModalLabel">ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
          </div>
          <div class="modal-body">
            <input type="file" name="file" class="form-control" accept=".xlsx" required>
            <div class="form-text mt-2">
              ì—‘ì…€ íŒŒì¼ì—ëŠ” <code>ë©´í—ˆë²ˆí˜¸, ì´ë¦„, ì†Œì†ê¸°ê´€</code> ì—´ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">ì—…ë¡œë“œ</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
          </div>
        </form>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <h3 class="card-title" style="text-align: center;">ì¶”ì²¨í•˜ê¸°</h3>
        <div class="row g-2 align-items-center mb-3">
          <div class="col-auto">
            <label for="count" class="form-label mb-0">ì¸ì› ìˆ˜:</label>
          </div>
          <div class="col-auto">
            <input type="number" class="form-control" id="count" min="1" placeholder="ì˜ˆ: 5">
          </div>
          <div class="col-auto">
            <label for="gift" class="form-label mb-0">ê²½í’ˆëª…:</label>
          </div>
          <div class="col-auto">
            <select id="gift" class="form-select">
              <option value="1ë“± í•´ì™¸ì—°ìˆ˜">1ë“± í•´ì™¸ì—°ìˆ˜</option>
              <option value="2ë“± ë‹¤ì´ìŠ¨ ì—ì–´ë© ì½”ì•ˆë‹¤2xâ„¢">2ë“± ë‹¤ì´ìŠ¨ ì—ì–´ë© ì½”ì•ˆë‹¤2xâ„¢</option>
              <option value="3ë“± ë‹¤ì´ìŠ¨ ì—ì–´ë© i.d.â„¢">3ë“± ë‹¤ì´ìŠ¨ ì—ì–´ë© i.d.â„¢</option>
              <option value="4ë“± ì»¤í”¼ë¨¸ì‹ ">4ë“± ì»¤í”¼ë¨¸ì‹ </option>
              <option value="5ë“± ìŠ¤íƒ€ë²…ìŠ¤ìƒí’ˆê¶Œ">5ë“± ìŠ¤íƒ€ë²…ìŠ¤ìƒí’ˆê¶Œ</option>
            </select>
          </div>
          <div class="col-auto">
            <label for="gift-limit" class="form-label mb-0">ë‹¹ì²¨ ìµœëŒ€ ì¸ì› ìˆ˜:</label>
          </div>
          <div class="col-auto">
            <input type="number" class="form-control" id="gift-limit" min="1" placeholder="ì˜ˆ: 5">
          </div>
        </div>

        <!-- âœ… ì¤„ ë°”ê¿” ê°€ìš´ë° ì •ë ¬ëœ í° ë²„íŠ¼ -->
        <div class="w-100 text-center mt-3">
          <button id="btn-draw" class="btn btn-success btn-lg px-5" type="button">ğŸ‰ ì¶”ì²¨í•˜ê¸° ğŸ‰</button>
        </div>

        <!-- ë‹¹ì²¨ì ì´ˆê¸°í™” / ì „ì²´ ì´ˆê¸°í™”: onclick ì œê±°, id ë¶€ì—¬ -->
        <div class="d-flex justify-content-between align-items-center mt-4">
          <div class="alert alert-secondary py-2 mb-0">
            ë‚¨ì€ ì¸ì›: <span id="remaining" class="fw-bold">{{ remaining }}</span>ëª…
          </div>
          <div class="d-flex gap-2">
            <button id="btn-clear" class="btn btn-outline-danger btn-sm" type="button">ë‹¹ì²¨ì ì´ˆê¸°í™”</button>
            <button id="btn-reset" class="btn btn-outline-dark btn-sm" type="button">ì „ì²´ ì´ˆê¸°í™”</button>
          </div>
        </div>

        <div id="error" class="alert alert-danger d-none mt-3"></div>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-body">
        <h1 class="card-title" style="text-align: center;">ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!!</h1>
        <table class="table table-bordered table-sm text-center">
          <thead id="thead-main">
            <tr>
              <th>ë©´í—ˆë²ˆí˜¸</th>
              <th>ì´ë¦„</th>
              <th>ì†Œì†ê¸°ê´€</th>
              <th>ê²½í’ˆ</th>
              <th>ì¬ì¶”ì²¨</th>
            </tr>
          </thead>
          <tbody id="recent-table-body"></tbody>
        </table>
      </div>
    </div>

    <div class="card mt-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <a class="btn btn-link text-decoration-none" data-bs-toggle="collapse" href="#collapseResult" role="button"
          aria-expanded="false" aria-controls="collapseResult">
          <strong>ì „ì²´ ì¶”ì²¨ ëˆ„ì  ê²°ê³¼</strong>
        </a>
        <div class="text-end">
          <div class="text-muted">
            ì´ ë‹¹ì²¨ì ìˆ˜: <span id="total-winners">0</span>ëª…
          </div>
          <div class="small text-muted" id="gift-counts">
            <!-- ê²½í’ˆë³„ ë‹¹ì²¨ì ìˆ˜ê°€ ì—¬ê¸°ì— ë“¤ì–´ê° -->
          </div>
        </div>
      </div>
      <div class="collapse" id="collapseResult">
        <div class="card-body">
          <ul class="list-group" id="result"></ul>
        </div>
      </div>
    </div>


  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</body>

</html>